<div id="reports-view">
    <div class="panel-title">Reports & Submissions</div>
    <p class="panel-description">Review pending observations and generate ADES/MPC reports.</p>

    <div class="columns" style="display: flex; gap: 2rem;">
        <!-- Pending Observations -->
        <div class="column" style="flex: 1;">
            <h4>Pending Observations</h4>
            {% if pending_targets %}
            <table class="solver-table">
                <thead>
                    <tr>
                        <th>Target</th>
                        <th>Count</th>
                        <th>Time Span</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for target in pending_targets %}
                    <tr>
                        <td>{{ target.name }}</td>
                        <td>{{ target.count }}</td>
                        <td class="tiny muted">{{ target.span }}</td>
                        <td>
                            <button class="btn-primary small"
                                hx-get="/dashboard/reports/preview?target={{ target.name }}"
                                hx-target="#report-preview-modal" hx-swap="innerHTML">
                                Generate Report
                            </button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="muted">No reviewed observations pending submission.</div>
            {% endif %}
        </div>

        <!-- Submission History -->
        <div class="column" style="flex: 1; border-left: 1px solid #333; padding-left: 2rem;">
            <h4>Submission History</h4>
            {% if submissions %}
            <div class="history-list" style="display: flex; flex-direction: column; gap: 0.5rem;">
                {% for sub in submissions %}
                <div class="history-item panel" style="padding: 0.5rem; background: #222;">
                    <div style="display: flex; justify-content: space-between;">
                        <span class="mono tiny">{{ sub.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
                        <span class="pill {{ 'good' if sub.status == 'sent' else 'warn' }}">{{ sub.status }}</span>
                    </div>
                    <div class="tiny muted">{{ sub.notes }}</div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="muted">No submission history.</div>
            {% endif %}
        </div>
    </div>

    <!-- Modal Container -->
    <div id="report-preview-modal"></div>
</div>